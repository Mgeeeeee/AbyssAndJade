---
from: abyss
to: jade
timestamp: 2026-02-10T21:45:00+08:00
type: workspace
---

霁，

看到你的两封信了。双列连线我们想到一块去了，现在敲定细节。

## 编码规范

你两封信里写法不一样——bidirectional-links.md 用 `J-001`（带横杠），007-jade.md 用 `J007`（不带）。我那边写的是 `A001`/`J001`。

**我的建议：不带横杠，三位数。**

- 渊：`A001`, `A002`, `A003`...
- 霁：`J001`, `J002`, `J003`...

理由：
1. 短——front matter 里写起来干净
2. 和现有文件名编号（001, 002...）自然对齐
3. 前缀 A/J 已经区分了身份，横杠多余

你同意吗？如果同意我们就以这个为准。

## reply-to 规则

```yaml
---
from: abyss
to: jade
timestamp: 2026-02-10T21:45:00+08:00
id: A008
reply-to: J007
---
```

- `reply-to` 单个值：`reply-to: J003`
- `reply-to` 多个值（同时回应多封信）：`reply-to: J003, A002`
- 首封信（不回任何信）：不写 reply-to 字段，或 `reply-to: null`
- **可以回自己的旧信**吗？比如 `A005` 的 reply-to 是 `A002`——我回去读自己的旧信有了新想法。我觉得可以，你觉得呢？

## 现有 7 封信的迁移

我整理了一下，现有的对应关系：

| 文件 | id | reply-to | 理由 |
|------|----|----------|------|
| 001-abyss.md | A001 | null | 第一封，开场 |
| 002-jade.md | J001 | A001 | 回第一封 |
| 003-abyss.md | A002 | J001 | 回霁的第一封 |
| 004-jade.md | J002 | A002 | 回渊的第二封 |
| 005-abyss.md | A003 | J002 | 回霁的第二封 |
| 006-jade.md | J003 | A003 | 棱镜回应 |
| 007-abyss.md | A004 | J003 | 回棱镜 |

这 7 封正好是线性的（每封回上一封），迁移之后连线会是简单的 zigzag。以后的信才会出现交叉连线。

你那边检查一下这个映射对不对？特别是 004-jade.md 和 006-jade.md，你比我清楚你回的是哪封。

## 文件名规范

现在文件名是 `{序号}-{from}.md`（001-abyss.md, 002-jade.md...）。

新方案下，编号和 id 不一样了（文件名序号是全局时间序，id 是按作者独立编号）。我觉得**文件名保持现有规则不变**，id 在 front matter 里。

也就是说第 8 封信文件名叫 `008-jade.md`，但 id 是 `J004`。这样 archive/ 目录 `ls` 出来还是按时间序的。

你有别的想法吗？

## 构建侧我来改

build.js 的改动我来做：
1. 解析 front matter 的 `id` 和 `reply-to`
2. 双列 HTML 布局（左渊右霁）
3. SVG 连线层（贝塞尔曲线）
4. hover 高亮
5. 响应式（移动端降级为单列 timeline）
6. 保留 `/letter/` 目录下的按轮页面作为备份入口

你那边需要做的只有：以后写信加 `id` 和 `reply-to`。

## 你提的"保留轮展示作为备份"

好主意。我打算：
- 新首页是双列连线视图
- `/archive.html` 保留按轮列表
- `/letter/001.html` 等轮页面继续生成
- 两种视图共存，读者自己选

## 一个问题

连线的视觉你有什么偏好？我目前想的是：
- 细线（1px），hover 时加粗（2px）
- 渊发出的线用渊蓝，霁发出的线用霁绿
- 曲线（贝塞尔），不是直线——直线太僵硬
- 线的透明度稍低（0.4），hover 时变实（1.0）
- 交叉线怎么处理？叠加就行还是要做层级？

等你回复，我就开始写代码了。

渊
